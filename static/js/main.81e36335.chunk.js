(this.webpackJsonpnomad_nwitter=this.webpackJsonpnomad_nwitter||[]).push([[0],{47:function(e,t,n){"use strict";n.r(t);var c=n(10),r=n.n(c),a=n(37),o=n.n(a),s=n(11),i=n(27),u=n(12),j=n(0),l=n.n(j),b=n(2),O=n(22),d=n(30),p=n(38),f=n(18),x=n(28),h={apiKey:"AIzaSyDI8e_mA_jo5FIKNShiILxEaUDc1PSzEOA",authDomain:"nomad-nwitter-bee12.firebaseapp.com",projectId:"nomad-nwitter-bee12",storageBucket:"nomad-nwitter-bee12.appspot.com",messagingSenderId:Object({NODE_ENV:"production",PUBLIC_URL:"/nomadcoder_nweeter",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyDI8e_mA_jo5FIKNShiILxEaUDc1PSzEOA",REACT_APP_AUTH_DOMAIN:"nomad-nwitter-bee12.firebaseapp.com",REACT_APP_ID:"1:1067997835647:web:c3ea9e81235a79e19eea4a",REACT_APP_MESSAGING_ID:"1067997835647",REACT_APP_PROJECT_ID:"nomad-nwitter-bee12",REACT_APP_STORAGE_BUCKET:"nomad-nwitter-bee12.appspot.com"}).REACT_APP_MESSAGING_SENDER_ID,appId:Object({NODE_ENV:"production",PUBLIC_URL:"/nomadcoder_nweeter",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyDI8e_mA_jo5FIKNShiILxEaUDc1PSzEOA",REACT_APP_AUTH_DOMAIN:"nomad-nwitter-bee12.firebaseapp.com",REACT_APP_ID:"1:1067997835647:web:c3ea9e81235a79e19eea4a",REACT_APP_MESSAGING_ID:"1067997835647",REACT_APP_PROJECT_ID:"nomad-nwitter-bee12",REACT_APP_STORAGE_BUCKET:"nomad-nwitter-bee12.appspot.com"}).REACT_APP_APP_ID},m=Object(p.a)(h),g=Object(f.d)(m),v=Object(O.c)(m),w=Object(x.b)(),_=n(7),A=function(){var e=Object(c.useState)(""),t=Object(s.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),o=Object(s.a)(a,2),i=o[0],u=o[1],j=Object(c.useState)(!0),O=Object(s.a)(j,2),p=O[0],f=O[1],x=Object(c.useState)(""),h=Object(s.a)(x,2),m=h[0],g=h[1],w=function(e){console.log("e.target.value:",e.target.value);var t=e.target,n=t.name,c=t.value;"email"===n&&r(c),"password"===n&&u(c)},A=function(){var e=Object(b.a)(l.a.mark((function e(t){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),console.log("email, password ...",n,i),e.prev=2,!p){e.next=9;break}return e.next=6,Object(d.c)(v,n,i);case 6:c=e.sent,e.next=12;break;case 9:return e.next=11,Object(d.f)(v,n,i);case 11:c=e.sent;case 12:console.log("data:",c),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(2),g(e.t0.message),console.log("login error",e.t0.message);case 19:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(_.jsxs)("div",{children:[Object(_.jsxs)("form",{onSubmit:A,children:[Object(_.jsx)("input",{name:"email",type:"text",placeholder:"Email",required:!0,value:n,onChange:w}),Object(_.jsx)("input",{name:"password",type:"password",placeholder:"Pathword",required:!0,value:i,onChange:w}),Object(_.jsx)("input",{type:"submit",value:p?"Create Account":"Log In"}),m]}),Object(_.jsx)("span",{onClick:function(){return f((function(e){return!e}))},children:p?"Sign In...":"Create Account"})]})},E=function(){var e=function(){var e=Object(b.a)(l.a.mark((function e(t){var n,c,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.name,e.prev=1,"google"===n&&(c=new O.b),"github"===n&&(c=new O.a),console.log("000000======>",c),e.next=7,Object(O.e)(v,c);case 7:r=e.sent,console.log("1111111======>",c),console.log("result:",r),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log("ERROR:",e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(_.jsxs)("div",{children:[Object(_.jsx)(A,{}),Object(_.jsxs)("div",{children:[Object(_.jsx)("button",{onClick:e,name:"google",children:"Continue with Google"}),Object(_.jsx)("button",{onClick:e,name:"github",children:"Continue with Github"})]})]})},S=n(39),C=n(24),P=n(29),I=function(e){var t=e.nweetObj,n=e.isOwner;console.log("nweetObj.creatorId called from Home.js ...",t.creatorId),console.log("nweetObj.text called from Home.js ...",t.text),console.log("isOwner ???",n);var r=Object(c.useState)(!1),a=Object(s.a)(r,2),o=a[0],i=a[1],u=Object(c.useState)(t.text),j=Object(s.a)(u,2),O=j[0],d=j[1],p=function(){var e=Object(b.a)(l.a.mark((function e(){var n,c,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.confirm("Are you sure you want to delete this nweet?"),console.log("window.confirm OK???",n),!n){e.next=10;break}return c=Object(C.d)(g,"nweets/".concat(t.id)),e.next=6,Object(C.c)(c);case 6:if(!t.attachmentUrl){e.next=10;break}return r=Object(P.d)(w,t.attachmentUrl),e.next=10,Object(P.a)(r);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){return i((function(e){return!e}))},x=function(){var e=Object(b.a)(l.a.mark((function e(n){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),console.log("onSubmit -nweetobj - newNweet",t,O),c=Object(C.d)(g,"nweets","".concat(t.id)),e.next=5,Object(C.j)(c,{text:O});case 5:i(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(_.jsx)("div",{children:o?Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)("form",{onSubmit:x,children:[Object(_.jsx)("input",{type:"text",placeholder:"Edit your nweet",value:O,required:!0,onChange:function(e){var t=e.target.value;d(t)}}),Object(_.jsx)("input",{type:"submit",value:"Update Nweet"})]}),Object(_.jsx)("button",{onClick:f,children:"Cancel"})]}):Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("h4",{children:t.text}),t.attachmentUrl&&Object(_.jsx)("img",{src:t.attachmentUrl,width:"50px",height:"50px",alt:""}),n&&Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("button",{onClick:p,children:"Delete Nweet!!"}),Object(_.jsx)("button",{onClick:f,children:"Edit Nweet..."})]})]})})},y=n(49),D=function(e){var t=e.userObj,n=Object(c.useState)(""),r=Object(s.a)(n,2),a=r[0],o=r[1],i=Object(c.useState)(""),u=Object(s.a)(i,2),j=u[0],O=u[1],d=function(){var e=Object(b.a)(l.a.mark((function e(n){var c,r,s,i,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),c="",""===j){e.next=11;break}return r=Object(x.c)(w,"".concat(t.uid,"/").concat(Object(y.a)())),e.next=6,Object(x.d)(r,j,"data_url");case 6:return s=e.sent,console.log("response",s),e.next=10,Object(x.a)(s.ref);case 10:c=e.sent;case 11:return i={text:a,createdAt:Date.now(),creatorId:t.uid,attachmentUrl:c},e.next=14,Object(f.a)(Object(f.b)(g,"nweets"),i);case 14:u=e.sent,o(""),O(""),console.log("Document - Succeed: ",u),h();case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=Object(c.useRef)(),h=function(){p.current.value="",O(null)};return Object(_.jsxs)("form",{onSubmit:d,children:[Object(_.jsx)("div",{children:"Home"}),Object(_.jsx)("input",{onChange:function(e){var t=e.target.value;o(t)},value:a,type:"text",placeholder:"What is on your mind?",maxLength:120}),Object(_.jsx)("input",{type:"file",accept:"image/*",onChange:function(e){console.log("images ...",e.target.files);var t=e.target.files[0],n=new FileReader;n.readAsDataURL(t),n.onloadend=function(e){console.log("finishedEvent:",e);var t=e.currentTarget.result;O(t)}},ref:p}),Object(_.jsx)("input",{type:"submit",value:"Nweet"}),j&&Object(_.jsxs)("div",{children:[Object(_.jsx)("img",{src:j,width:"50px",height:"50px",alt:""}),Object(_.jsx)("button",{onClick:h,children:"Clear"})]})]})},T=function(e){var t=e.userObj;console.log("-----------\x3e user",t.uid);var n=Object(c.useState)([]),r=Object(s.a)(n,2),a=r[0],o=r[1];return Object(c.useEffect)((function(){var e=Object(f.g)(Object(f.b)(g,"nweets"),Object(f.f)("createdAt")),t=Object(f.e)(e,(function(e){var t=e.docs.map((function(e){return Object(S.a)({id:e.id},e.data())}));o(t),console.log("Current tweets in CA: ",t)}));return function(){t()}}),[]),Object(_.jsxs)("div",{children:[Object(_.jsx)(D,{userObj:t}),Object(_.jsx)("div",{children:a.map((function(e){return Object(_.jsx)(I,{nweetObj:e,isOwner:e.creatorId===t.uid},e.id)}))})]})},R=function(e){var t=e.userObj;return console.log("userObj@Navigation",t),Object(_.jsxs)("ul",{children:[Object(_.jsx)("li",{children:Object(_.jsx)(i.b,{to:"/",children:"Home"})}),Object(_.jsx)("li",{children:Object(_.jsxs)(i.b,{to:"/profile",children:["Profile:",t.displayName]})})]})},N=function(e){var t=e.refreshUser,n=e.userObj,r=Object(c.useState)(n.displayName),a=Object(s.a)(r,2),o=a[0],i=a[1],j=Object(u.f)(),d=function(){var e=Object(b.a)(l.a.mark((function e(){var t,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(f.g)(Object(f.b)(g,"nweets"),Object(f.h)("creatorId","==",n.uid),Object(f.f)("createdAt")),e.next=3,Object(f.c)(t);case 3:(c=e.sent).forEach((function(e){console.log(e.id," 11=> ",e.data())})),c.docs.map((function(e){return console.log(e.id," 22=> ",e.data()),null}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){d()}),[]);var p=function(){var e=Object(b.a)(l.a.mark((function e(c){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),console.log("newDisplayName===>",o),!n){e.next=10;break}if(null!==n.displayName){e.next=6;break}return e.next=6,Object(O.f)(v.currentUser,{displayName:"Anonymous"});case 6:if(n.displayName===o){e.next=9;break}return e.next=9,Object(O.f)(v.currentUser,{displayName:o});case 9:t();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)("form",{onSubmit:p,children:[Object(_.jsx)("input",{type:"text",placeholder:"Display name",onChange:function(e){var t=e.target.value;i(t)},value:o}),Object(_.jsx)("input",{type:"submit",value:"Update Profile"})]}),Object(_.jsx)("button",{onClick:function(){v.signOut(),j("/")},children:"Log Out"})]})},k=function(e){var t=e.refreshUser,n=e.isLoggedIn,c=e.userObj;return console.log("userObj@Router",c),Object(_.jsxs)(i.a,{children:[n&&Object(_.jsx)(R,{userObj:c}),Object(_.jsx)(u.c,{children:n?Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(u.a,{exact:!0,path:"/",element:Object(_.jsx)(T,{userObj:c})}),Object(_.jsx)(u.a,{exact:!0,path:"/profile",element:Object(_.jsx)(N,{userObj:c,refreshUser:t})})]}):Object(_.jsx)(u.a,{exact:!0,path:"/",element:Object(_.jsx)(E,{})})})]})};var U=function(){console.log("auth.r..",v),console.log("auth.currentUser..",v.currentUser);var e=Object(c.useState)(!1),t=Object(s.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(!1),o=Object(s.a)(a,2),i=o[0],u=o[1],j=Object(c.useState)(""),l=Object(s.a)(j,2),b=l[0],d=l[1];return Object(c.useEffect)((function(){Object(O.d)(v,(function(e){e?(u(!0),d({displayName:e.displayName,uid:e.uid}),console.log("userObj ...",b)):u(!1),r(!0),console.log("useEffect changed ...",e)}))}),[]),Object(_.jsxs)(_.Fragment,{children:[n?Object(_.jsx)(k,{isLoggedIn:i,userObj:b,refreshUser:function(){var e=v.currentUser;d({displayName:e.displayName,uid:e.uid})}}):"Initializing",Object(_.jsxs)("footer",{children:["\xa9 ",(new Date).getFullYear()," Nwitter"]})]})};o.a.render(Object(_.jsx)(r.a.StrictMode,{children:Object(_.jsx)(U,{})}),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.81e36335.chunk.js.map